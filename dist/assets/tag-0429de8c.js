import{l as U,d as x,u as j,c as Y}from"./tag-f397c763.js";import{d as G,b as g,A as C,l as H,r as i,o as b,e as R,f as c,n,y as s,C as S,z as J,g as l,m as r,p as Q,h as W}from"./index-da835352.js";import{_ as X}from"./_plugin-vue_export-helper-c27b6911.js";const Z=_=>(Q("data-v-63a3bd9a"),_=_(),W(),_),ee={class:"page-view"},te={class:"table-operations"},oe={key:0},ae=["onClick"],ne=Z(()=>c("a",{href:"#",style:{color:"red"}},"Delete",-1)),le=G({__name:"tag",setup(_){const F=g([{title:"No.",dataIndex:"index",key:"index",align:"center"},{title:"Room name",dataIndex:"title",key:"title",align:"center"},{title:"Room seats",dataIndex:"seat",key:"seat",align:"center"},{title:"Operation",dataIndex:"action",key:"operation",align:"center",fixed:"right",width:140}]),a=g({tagList:[],loading:!1,keyword:"",selectedRowKeys:[],pageSize:10,page:1}),t=g({visile:!1,editFlag:!1,title:"",form:{id:void 0,title:void 0,seat:void 0},rules:{title:[{required:!0,message:"Please enter",trigger:"change"}],seat:[{required:!0,message:"Please enter",trigger:"change"}]}}),f=C();H(()=>{m()});const m=()=>{a.loading=!0,U({keyword:a.keyword}).then(e=>{a.loading=!1,console.log(e),e.data.forEach((o,p)=>{o.index=p+1}),a.tagList=e.data}).catch(e=>{a.loading=!1,console.log(e)})},A=C({onChange:(e,o)=>{console.log(`selectedRowKeys: ${e}`,"selectedRows: ",o),a.selectedRowKeys=e}}),I=()=>{h(),t.visile=!0,t.editFlag=!1,t.title="Add";for(const e in t.form)t.form[e]=void 0},K=e=>{h(),t.visile=!0,t.editFlag=!0,t.title="Edit";for(const o in t.form)t.form[o]=void 0;for(const o in e)t.form[o]=e[o]},O=e=>{console.log("delete",e),x({ids:e.id}).then(o=>{m()}).catch(o=>{r.error(o.msg||"Operation Failed")})},z=()=>{if(console.log(a.selectedRowKeys),a.selectedRowKeys.length<=0){console.log("hello"),r.warn("Select items to delete");return}x({ids:a.selectedRowKeys.join(",")}).then(e=>{r.success("Delete Successful"),a.selectedRowKeys=[],m()}).catch(e=>{r.error(e.msg||"Operation Failed")})},D=()=>{var e;(e=f.value)==null||e.validate().then(()=>{t.editFlag?j({id:t.form.id},t.form).then(o=>{u(),m()}).catch(o=>{r.error(o.msg||"Operation Failed")}):Y(t.form).then(o=>{u(),m()}).catch(o=>{r.error(o.msg||"Operation Failed")})}).catch(o=>{console.log("Cannot be blank")})},N=()=>{u()},h=()=>{var e;(e=f.value)==null||e.resetFields()},u=()=>{t.visile=!1};return(e,o)=>{const p=i("a-button"),E=i("a-space"),B=i("a-divider"),L=i("a-popconfirm"),M=i("a-table"),v=i("a-input"),y=i("a-form-item"),k=i("a-col"),P=i("a-row"),V=i("a-form"),$=i("a-modal");return b(),R("div",null,[c("div",ee,[c("div",te,[n(E,null,{default:s(()=>[n(p,{type:"primary",onClick:I},{default:s(()=>[S("Add")]),_:1}),n(p,{danger:"",onClick:z},{default:s(()=>[S("Mass Delete")]),_:1})]),_:1})]),n(M,{size:"middle",rowKey:"id",loading:l(a).loading,columns:l(F),"data-source":l(a).tagList,scroll:{x:"max-content"},"row-selection":l(A),pagination:{size:"default",current:l(a).page,pageSize:l(a).pageSize,onChange:d=>l(a).page=d,showSizeChanger:!1,showTotal:d=>`Total of ${d} data`}},{bodyCell:s(({text:d,record:w,index:se,column:T})=>[T.key==="operation"?(b(),R("span",oe,[c("a",{onClick:q=>K(w)},"Edit",8,ae),n(B,{type:"vertical"}),n(L,{title:"Sure to delete?","ok-text":"Yes","cancel-text":"No",onConfirm:q=>O(w)},{default:s(()=>[ne]),_:2},1032,["onConfirm"])])):J("",!0)]),_:1},8,["loading","columns","data-source","row-selection","pagination"])]),c("div",null,[n($,{visible:l(t).visile,forceRender:!0,title:l(t).title,"ok-text":"OK","cancel-text":"Cancel",onCancel:N,onOk:D},{default:s(()=>[c("div",null,[n(V,{ref_key:"myform",ref:f,"label-col":{style:{width:"120px"}},model:l(t).form,rules:l(t).rules},{default:s(()=>[n(P,{gutter:24},{default:s(()=>[n(k,{span:"24"},{default:s(()=>[n(y,{label:"Room name",name:"title"},{default:s(()=>[n(v,{placeholder:"Please enter",value:l(t).form.title,"onUpdate:value":o[0]||(o[0]=d=>l(t).form.title=d)},null,8,["value"])]),_:1})]),_:1}),n(k,{span:"24"},{default:s(()=>[n(y,{label:"Room seats",name:"seat"},{default:s(()=>[n(v,{placeholder:"Please enter",value:l(t).form.seat,"onUpdate:value":o[1]||(o[1]=d=>l(t).form.seat=d)},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])])]),_:1},8,["visible","title"])])])}}});const ce=X(le,[["__scopeId","data-v-63a3bd9a"]]);export{ce as default};
