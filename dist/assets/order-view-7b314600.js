import{u as U,k as z,a as E,A as g,l as R,B as $,r,o as d,e as y,n as c,y as _,g as v,f as e,F as q,q as F,t as a,c as x,C as A,z as b,p as M,h as j,m}from"./index-da835352.js";import{u as G,a as H,p as J}from"./order-09e817fb.js";import{_ as K}from"./_plugin-vue_export-helper-c27b6911.js";const l=u=>(M("data-v-2d00af7e"),u=u(),j(),u),Q={class:"content-list"},W=l(()=>e("div",{class:"list-title"},"My Orders",-1)),X={class:"list-content"},Y={class:"header flex-view"},Z={class:"left"},ee=l(()=>e("span",{class:"text"},"Order number",-1)),se=l(()=>e("span",{class:"num mg-4"},"#",-1)),te={class:"num"},oe={class:"time"},ae={class:"right"},ne=l(()=>e("span",{class:"text"},"Order Status",-1)),ce={class:"state"},le={class:"content flex-view"},ie={class:"left-list"},re={class:"list-item flex-view"},de=["src"],_e={class:"detail flex-between flex-view"},pe={class:"flex-between flex-top flex-view"},ue={class:"name"},he={class:"count"},fe={class:"right-info"},ve=l(()=>e("label",{style:{"font-weight":"bolder"}},"Term",-1)),me={class:"count"},ge=l(()=>e("p",{class:"title"},"Notes",-1)),ye={class:"text"},xe={style:{"font-weight":"bolder"}},be={class:"bottom flex-view"},we={class:"left"},Ce={class:"text"},ke=["onClick"],Se={class:"right flex-view"},Ae=l(()=>e("span",{class:"text"},"Total",-1)),Oe={class:"money"},Be={__name:"order-view",setup(u){const O=U();z();const B=E(),h=g(!1),p=g([]),i=g("");R(()=>{f()});const D=t=>{console.log(t),t==="1"&&(i.value=""),t==="2"&&(i.value="1"),t==="3"&&(i.value="2"),t==="4"&&(i.value="7"),t==="5"&&(i.value="8"),f()},f=()=>{h.value=!0;let t=B.user_id;G({userId:t,orderStatus:i.value}).then(o=>{o.data.forEach((n,w)=>{n.cover&&(n.cover=$+n.cover)}),p.value=o.data,console.log(p.value),h.value=!1}).catch(o=>{console.log(o),h.value=!1})},I=t=>{let o=O.resolve({name:"detail",query:{id:t}});window.open(o.href,"_blank")},N=t=>{H({id:t.id}).then(o=>{m.success("取消成功"),f()}).catch(o=>{m.error(o.msg||"取消失败")})},P=t=>{J({id:t.id}).then(o=>{m.success("支付成功"),f()}).catch(o=>{m.error(o.msg||"支付失败")})};return(t,o)=>{const n=r("a-tab-pane"),w=r("a-tabs"),C=r("a-button"),k=r("a-popconfirm"),V=r("a-empty"),L=r("a-spin");return d(),y("div",Q,[W,c(w,{"default-active-key":"1",onChange:D},{default:_(()=>[c(n,{key:"1",tab:"All"}),c(n,{key:"2",tab:"Pending payment"}),c(n,{key:"3",tab:"Paid"}),c(n,{key:"4",tab:"Canceled"}),c(n,{key:"5",tab:"Done"})]),_:1}),c(L,{spinning:v(h),style:{"min-height":"200px"}},{default:_(()=>[e("div",X,[(d(!0),y(q,null,F(v(p),(s,T)=>(d(),y("div",{class:"order-item-view",key:T},[e("div",Y,[e("div",Z,[ee,se,e("span",te,a(s.order_number),1),e("span",oe,a(s.order_time),1)]),e("div",ae,[s.status===1?(d(),x(k,{key:0,title:"Sure to cancel the order？","ok-text":"yes","cancel-text":"no",onConfirm:S=>N(s)},{default:_(()=>[c(C,{type:"primary",size:"small",style:{"margin-right":"24px"}},{default:_(()=>[A("Cancel")]),_:1})]),_:2},1032,["onConfirm"])):b("",!0),s.status===1?(d(),x(k,{key:1,title:"Already pay the order?","ok-text":"yes","cancel-text":"no",onConfirm:S=>P(s)},{default:_(()=>[c(C,{type:"primary",size:"small",style:{"margin-right":"24px"}},{default:_(()=>[A("Pay")]),_:1})]),_:2},1032,["onConfirm"])):b("",!0),ne,e("span",ce,a(s.status===8||s.status===6?"Done":s.status===1?"Pending payment":s.status===2?"Paid":"Canceled"),1)])]),e("div",le,[e("div",ie,[e("div",re,[e("img",{src:s.cover,class:"thing-img"},null,8,de),e("div",_e,[e("div",pe,[e("h2",ue,a(s.title),1),e("span",he,"x"+a(s.num),1)])])])]),e("div",fe,[e("div",null,[ve,e("span",me,": "+a(s.term_title),1)]),ge,e("p",ye,a(s.remark||"None"),1),e("p",null,[e("span",xe,"Child name: "+a(s.child_name),1)])])]),e("div",be,[e("div",we,[e("span",Ce,"A total of "+a(s.num)+" lessons",1),e("span",{class:"open",onClick:S=>I(s.thing)},"Class Detail",8,ke)]),e("div",Se,[Ae,e("span",Oe,"¥ "+a(s.amount),1)])])]))),128)),!v(p)||v(p).length<=0?(d(),x(V,{key:0,style:{width:"100%","margin-top":"200px"}})):b("",!0)])]),_:1},8,["spinning"])])}}},Pe=K(Be,[["__scopeId","data-v-2d00af7e"]]);export{Pe as default};
