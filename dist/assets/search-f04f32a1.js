import{H as S}from"./header-ca487dae.js";import{F as k}from"./footer-597ca35d.js";import{a as D,u as z,k as C,b as P,l as b,E as B,B as I,r as v,o as _,e as d,f as a,t as r,g as s,n as l,y as q,F as E,q as F,p as V,h as $}from"./index-da835352.js";import{l as L}from"./thing-a049f12c.js";import{_ as m}from"./_plugin-vue_export-helper-c27b6911.js";import"./k-logo-b1d5237f.js";import"./avatar-4ee3f7af.js";const w=i=>(V("data-v-ff2d1a7f"),i=i(),$(),i),R={class:"content-margin"},U={class:"search-name-box"},A={class:"search-tab-nav clearfix"},H={class:"tab-text"},N=w(()=>a("span",null,"choose the time period for",-1)),M={class:"strong"},O={class:"content-list"},T={class:"thing-list"},j={class:"things flex-view"},G=["onClick"],J={class:"info-view"},K=w(()=>a("span",null,null,-1)),Q={class:"page-view",style:{}},W={__name:"search-content-view",setup(i){D();const h=z(),p=C(),e=P({loading:!1,keyword:"",thingData:[],pageData:[],page:1,total:0,pageSize:20});b(()=>{g()}),B(()=>p.query,(o,t)=>{g()},{immediate:!1});const g=()=>{e.keyword=p.query.keyword.trim(),x({keyword:e.keyword})},u=o=>{e.page=o;let t=(e.page-1)*e.pageSize;e.pageData=e.thingData.slice(t,t+e.pageSize),console.log("第"+e.page+"页")},y=o=>{let t=h.resolve({name:"detail",query:{id:o.id}});window.open(t.href,"_blank")},x=o=>{e.loading=!0,L(o).then(t=>{t.data.forEach((n,f)=>{n.cover&&(n.cover=I+n.cover)}),t.data=t.data.filter(n=>n.status!=="1"),e.thingData=t.data,e.total=e.thingData.length,u(1),e.loading=!1}).catch(t=>{console.log(t),e.loading=!1})};return(o,t)=>{const n=v("a-spin"),f=v("a-pagination");return _(),d("div",R,[a("h1",U,r(s(e).keyword),1),a("div",A,[a("div",H,[N,a("span",M,r(s(e).keyword),1)])]),a("div",O,[a("div",T,[l(n,{spinning:s(e).loading,style:{"min-height":"200px"}},{default:q(()=>[a("div",j,[(_(!0),d(E,null,F(s(e).pageData,c=>(_(),d("div",{class:"thing-item item-column-4",onClick:te=>y(c)},[a("div",J,[a("h1",null,r(c.time_title)+", "+r(c.day),1),K])],8,G))),256))])]),_:1},8,["spinning"]),a("div",Q,[l(f,{value:s(e).page,"onUpdate:value":t[0]||(t[0]=c=>s(e).page=c),size:"small",onChange:u,hideOnSinglePage:!0,defaultPageSize:s(e).pageSize,total:s(e).total},null,8,["value","defaultPageSize","total"])])])])])}}},X=m(W,[["__scopeId","data-v-ff2d1a7f"]]);const Y={class:"search"},Z={class:"search-content"},ee={__name:"search",setup(i){return(h,p)=>(_(),d("div",Y,[l(S),a("div",Z,[l(X)]),l(k)]))}},re=m(ee,[["__scopeId","data-v-921c279a"]]);export{re as default};
