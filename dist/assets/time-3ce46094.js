import{l as q,d as y,u as U,c as Y}from"./time-bbd92b80.js";import{d as G,b as g,A as w,l as H,r as s,o as k,e as x,f as r,n as l,y as i,C,z as J,g as n,m as d,p as Q,h as W}from"./index-da835352.js";import{_ as X}from"./_plugin-vue_export-helper-c27b6911.js";const Z=_=>(Q("data-v-137fb0e2"),_=_(),W(),_),ee={class:"page-view"},te={class:"table-operations"},oe={key:0},ae=["onClick"],ne=Z(()=>r("a",{href:"#",style:{color:"red"}},"Delete",-1)),le=G({__name:"time",setup(_){const b=g([{title:"No.",dataIndex:"index",key:"index",align:"center"},{title:"Time period",dataIndex:"time",key:"time",align:"center"},{title:"Operation",dataIndex:"action",key:"operation",align:"center",fixed:"right",width:140}]),a=g({tagList:[],loading:!1,keyword:"",selectedRowKeys:[],pageSize:10,page:1}),t=g({visile:!1,editFlag:!1,title:"",form:{id:void 0,time:void 0},rules:{time:[{required:!0,message:"Please enter",trigger:"change"}]}}),f=w();H(()=>{m()});const m=()=>{a.loading=!0,q({keyword:a.keyword}).then(e=>{a.loading=!1,console.log(e),e.data.forEach((o,p)=>{o.index=p+1}),a.tagList=e.data}).catch(e=>{a.loading=!1,console.log(e)})},S=w({onChange:(e,o)=>{console.log(`selectedRowKeys: ${e}`,"selectedRows: ",o),a.selectedRowKeys=e}}),F=()=>{h(),t.visile=!0,t.editFlag=!1,t.title="Add";for(const e in t.form)t.form[e]=void 0},A=e=>{h(),t.visile=!0,t.editFlag=!0,t.title="Edit";for(const o in t.form)t.form[o]=void 0;for(const o in e)t.form[o]=e[o]},K=e=>{console.log("delete",e),y({ids:e.id}).then(o=>{m()}).catch(o=>{d.error(o.msg||"Operation Failed")})},O=()=>{if(console.log(a.selectedRowKeys),a.selectedRowKeys.length<=0){console.log("hello"),d.warn("Select items to delete");return}y({ids:a.selectedRowKeys.join(",")}).then(e=>{d.success("Delete Successful"),a.selectedRowKeys=[],m()}).catch(e=>{d.error(e.msg||"Operation Failed")})},R=()=>{var e;(e=f.value)==null||e.validate().then(()=>{t.editFlag?U({id:t.form.id},t.form).then(o=>{u(),m()}).catch(o=>{d.error(o.msg||"Operation Failed")}):Y(t.form).then(o=>{u(),m()}).catch(o=>{d.error(o.msg||"Operation Failed")})}).catch(o=>{console.log("Cannot be blank")})},z=()=>{u()},h=()=>{var e;(e=f.value)==null||e.resetFields()},u=()=>{t.visile=!1};return(e,o)=>{const p=s("a-button"),I=s("a-space"),D=s("a-divider"),N=s("a-popconfirm"),E=s("a-table"),T=s("a-input"),B=s("a-form-item"),L=s("a-col"),M=s("a-row"),V=s("a-form"),$=s("a-modal");return k(),x("div",null,[r("div",ee,[r("div",te,[l(I,null,{default:i(()=>[l(p,{type:"primary",onClick:F},{default:i(()=>[C("Add")]),_:1}),l(p,{danger:"",onClick:O},{default:i(()=>[C("Mass Delete")]),_:1})]),_:1})]),l(E,{size:"middle",rowKey:"id",loading:n(a).loading,columns:n(b),"data-source":n(a).tagList,scroll:{x:"max-content"},"row-selection":n(S),pagination:{size:"default",current:n(a).page,pageSize:n(a).pageSize,onChange:c=>n(a).page=c,showSizeChanger:!1,showTotal:c=>`Total of ${c} data`}},{bodyCell:i(({text:c,record:v,index:se,column:P})=>[P.key==="operation"?(k(),x("span",oe,[r("a",{onClick:j=>A(v)},"Edit",8,ae),l(D,{type:"vertical"}),l(N,{title:"Sure to delete?","ok-text":"Yes","cancel-text":"No",onConfirm:j=>K(v)},{default:i(()=>[ne]),_:2},1032,["onConfirm"])])):J("",!0)]),_:1},8,["loading","columns","data-source","row-selection","pagination"])]),r("div",null,[l($,{visible:n(t).visile,forceRender:!0,title:n(t).title,"ok-text":"OK","cancel-text":"Cancel",onCancel:z,onOk:R},{default:i(()=>[r("div",null,[l(V,{ref_key:"myform",ref:f,"label-col":{style:{width:"120px"}},model:n(t).form,rules:n(t).rules},{default:i(()=>[l(M,{gutter:24},{default:i(()=>[l(L,{span:"24"},{default:i(()=>[l(B,{label:"Time period",name:"time"},{default:i(()=>[l(T,{placeholder:"Please enter",value:n(t).form.time,"onUpdate:value":o[0]||(o[0]=c=>n(t).form.time=c)},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])])]),_:1},8,["visible","title"])])])}}});const re=X(le,[["__scopeId","data-v-137fb0e2"]]);export{re as default};
