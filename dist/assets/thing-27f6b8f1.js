import{n as a,M as de,j as ce,J as A,d as ue,b as S,A as P,l as me,r as u,o as C,e as F,f as y,y as l,C as f,z as fe,g as n,F as pe,q as ge,c as R,t as _e,I as ve,B as he,m as x,p as ye,h as be}from"./index-da835352.js";import{l as we}from"./classification-3730ec49.js";import{l as Ce}from"./tag-f397c763.js";import{l as xe}from"./time-bbd92b80.js";import{_ as ke}from"./_plugin-vue_export-helper-c27b6911.js";var Se={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M553.1 509.1l-77.8 99.2-41.1-52.4a8 8 0 00-12.6 0l-99.8 127.2a7.98 7.98 0 006.3 12.9H696c6.7 0 10.4-7.7 6.3-12.9l-136.5-174a8.1 8.1 0 00-12.7 0zM360 442a40 40 0 1080 0 40 40 0 10-80 0zm494.6-153.4L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494z"}}]},name:"file-image",theme:"outlined"};const Fe=Se;function z(s){for(var r=1;r<arguments.length;r++){var m=arguments[r]!=null?Object(arguments[r]):{},b=Object.keys(m);typeof Object.getOwnPropertySymbols=="function"&&(b=b.concat(Object.getOwnPropertySymbols(m).filter(function(p){return Object.getOwnPropertyDescriptor(m,p).enumerable}))),b.forEach(function(p){De(s,p,m[p])})}return s}function De(s,r,m){return r in s?Object.defineProperty(s,r,{value:m,enumerable:!0,configurable:!0,writable:!0}):s[r]=m,s}var I=function(r,m){var b=z({},r,m.attrs);return a(de,z({},b,{icon:Fe}),null)};I.displayName="FileImageOutlined";I.inheritAttrs=!1;const Oe=I,Pe=async s=>ce({url:"/CSAA/admin/thing/list",params:s,data:{},headers:{}}),Ae=async s=>A({url:"/CSAA/admin/thing/create",params:{},data:s,headers:{"Content-Type":"multipart/form-data;charset=utf-8"}}),Ie=async(s,r)=>A({url:"/CSAA/admin/thing/update",params:s,data:r,headers:{"Content-Type":"multipart/form-data;charset=utf-8"}}),L=async s=>A({url:"/CSAA/admin/thing/delete",params:s,headers:{}}),N=s=>(ye("data-v-16425872"),s=s(),be(),s),Ue={class:"page-view"},Te={class:"table-operations"},Re={key:0},ze=["onClick"],Le=N(()=>y("a",{href:"#",style:{color:"red"}},"Delete",-1)),Ne={class:"ant-upload-drag-icon"},$e=["src"],qe=N(()=>y("p",{class:"ant-upload-text"}," Please select the cover image ",-1)),Be=ue({__name:"thing",setup(s){const r=S({title:void 0,classification:void 0,tag:void 0,price:void 0,day:void 0,status:void 0,cover:void 0,coverUrl:void 0}),m=S([{title:"No.",dataIndex:"index",key:"index",width:60},{title:"Class name",dataIndex:"title",key:"title"},{title:"Price",dataIndex:"price",key:"price"},{title:"Day",dataIndex:"day",key:"day"},{title:"Time",dataIndex:"time_title",key:"time"},{title:"Room",dataIndex:"room_name",key:"tag"},{title:"Status",dataIndex:"status",key:"status",customRender:({text:o,record:t,index:d,column:h})=>o==="0"?"Available":"Unavailable"},{title:"Operation",dataIndex:"action",key:"operation",align:"center",fixed:"right",width:140}]),b=o=>{const t=new Date().getTime().toString()+"."+o.type.substring(6),d=new File([o],t);return console.log(d),e.form.imageFile=d,!1},p=P([]),c=S({dataList:[],loading:!1,keyword:"",selectedRowKeys:[],pageSize:10,page:1}),e=S({visile:!1,editFlag:!1,title:"",cData:[],timeData:[],tagData:[{}],form:{id:void 0,title:void 0,classification:void 0,tag:void 0,price:void 0,day:void 0,time:void 0,status:void 0,cover:void 0,coverUrl:void 0,imageFile:void 0},rules:{title:[{required:!0,message:"Please enter the Title",trigger:"change"}],classification:[{required:!0,message:"Please select the Classification",trigger:"change"}],tag:[{required:!0,message:"Please select a Room to teach",trigger:"change"}],price:[{required:!0,message:"Please enter the Price",trigger:"change"}],status:[{required:!0,message:"Please choose the status",trigger:"change"}],day:[{required:!0,message:"Please select",trigger:"change"}],time:[{required:!0,message:"Please enter the time pieriod",trigger:"change"}]}}),D=P();me(()=>{w(),$(),q(),B()});const w=()=>{c.loading=!0,Pe({keyword:c.keyword}).then(o=>{c.loading=!1,o.data.forEach((t,d)=>{t.index=d+1}),c.dataList=o.data}).catch(o=>{c.loading=!1,console.log(o)})},$=()=>{we({}).then(o=>{e.cData=o.data})},q=()=>{xe({}).then(o=>{e.timeData=o.data})},B=()=>{Ce({}).then(o=>{o.data.forEach((t,d)=>{t.index=d+1}),e.tagData=o.data})},E=o=>{var t;c.keyword=(t=o==null?void 0:o.target)==null?void 0:t.value,console.log(c.keyword)},M=()=>{w()},K=P({onChange:(o,t)=>{console.log(`selectedRowKeys: ${o}`,"selectedRows: ",t),c.selectedRowKeys=o}}),V=()=>{U(),e.visile=!0,e.editFlag=!1,e.title="New";for(const o in e.form)e.form[o]=r[o];e.form.cover=void 0},j=o=>{U(),e.visile=!0,e.editFlag=!0,e.title="Edit";for(const t in e.form)e.form[t]=void 0;for(const t in o)o[t]&&(e.form[t]=o[t]);e.form.cover&&(e.form.coverUrl=he+e.form.cover,e.form.cover=void 0)},H=o=>{console.log("delete",o),L({ids:o.id}).then(t=>{w()}).catch(t=>{x.error(t.msg||"Operation Failed")})},W=()=>{if(console.log(c.selectedRowKeys),c.selectedRowKeys.length<=0){console.log("hello"),x.warn("Select items to delete");return}L({ids:c.selectedRowKeys.join(",")}).then(o=>{x.success("Delete Successful"),c.selectedRowKeys=[],w()}).catch(o=>{x.error(o.msg||"Operation Failed")})},J=()=>{var o;(o=D.value)==null||o.validate().then(()=>{const t=new FormData;e.editFlag&&t.append("id",e.form.id),t.append("title",e.form.title),e.form.classification&&t.append("classification",e.form.classification),e.form.tag&&t.append("tag",e.form.tag),e.form.imageFile&&t.append("cover",e.form.imageFile),t.append("description",e.form.description||""),t.append("price",e.form.price||""),console.log(0xf6b75ab2bc47200),console.log(e.form.day),e.form.day&&t.append("day",e.form.day),e.form.time&&t.append("time",e.form.time),e.form.status&&t.append("status",e.form.status),e.editFlag?Ie({id:e.form.id},t).then(d=>{O(),w();for(const h in r)r[h]=e.form[h]}).catch(d=>{console.log(d),x.error(d.msg||"Operation Failed")}):Ae(t).then(d=>{O(),w();for(const h in r)r[h]=e.form[h]}).catch(d=>{console.log(d),x.error(d.msg||"Operation Failed")})}).catch(t=>{console.log(t)})},G=()=>{O()},U=()=>{var o;(o=D.value)==null||o.resetFields(),p.value=[]},O=()=>{e.visile=!1};return(o,t)=>{const d=u("a-button"),h=u("a-input-search"),Q=u("a-space"),X=u("a-divider"),Y=u("a-popconfirm"),Z=u("a-table"),ee=u("a-input"),g=u("a-form-item"),_=u("a-col"),k=u("a-select"),v=u("a-select-option"),te=u("a-upload-dragger"),ae=u("a-textarea"),oe=u("a-input-number"),le=u("a-row"),ne=u("a-form"),ie=u("a-modal");return C(),F("div",null,[y("div",Ue,[y("div",Te,[a(Q,null,{default:l(()=>[a(d,{type:"primary",onClick:V},{default:l(()=>[f("New")]),_:1}),a(d,{danger:"",onClick:W},{default:l(()=>[f("Mass Delete")]),_:1}),a(h,{"addon-before":"Title","enter-button":"",onSearch:M,onChange:E})]),_:1})]),a(Z,{size:"middle",rowKey:"id",loading:n(c).loading,columns:n(m),"data-source":n(c).dataList,scroll:{x:"max-content"},"row-selection":n(K),pagination:{size:"default",current:n(c).page,pageSize:n(c).pageSize,onChange:i=>n(c).page=i,showSizeChanger:!1,showTotal:i=>`Total of ${i} data`}},{bodyCell:l(({text:i,record:T,index:Ee,column:se})=>[se.key==="operation"?(C(),F("span",Re,[y("a",{onClick:re=>j(T)},"Edit",8,ze),a(X,{type:"vertical"}),a(Y,{title:"Sure to delete?","ok-text":"OK","cancel-text":"Cancel",onConfirm:re=>H(T)},{default:l(()=>[Le]),_:2},1032,["onConfirm"])])):fe("",!0)]),_:1},8,["loading","columns","data-source","row-selection","pagination"])]),y("div",null,[a(ie,{visible:n(e).visile,forceRender:!0,title:n(e).title,width:"880px","ok-text":"OK","cancel-text":"Cancel",onCancel:G,onOk:J},{default:l(()=>[y("div",null,[a(ne,{ref_key:"myform",ref:D,"label-col":{style:{width:"120px"}},model:n(e).form,rules:n(e).rules},{default:l(()=>[a(le,{gutter:24},{default:l(()=>[a(_,{span:"24"},{default:l(()=>[a(g,{label:"Class Name",name:"title"},{default:l(()=>[a(ee,{placeholder:"Please enter",value:n(e).form.title,"onUpdate:value":t[0]||(t[0]=i=>n(e).form.title=i)},null,8,["value"])]),_:1})]),_:1}),a(_,{span:"12"},{default:l(()=>[a(g,{label:"Classification",name:"classification"},{default:l(()=>[a(k,{placeholder:"Please select",allowClear:"",options:n(e).cData,"field-names":{label:"title",value:"id"},value:n(e).form.classification,"onUpdate:value":t[1]||(t[1]=i=>n(e).form.classification=i)},null,8,["options","value"])]),_:1})]),_:1}),a(_,{span:"12"},{default:l(()=>[a(g,{label:"Room",name:"tag"},{default:l(()=>[a(k,{placeholder:"Please select",allowClear:"",value:n(e).form.tag,"onUpdate:value":t[2]||(t[2]=i=>n(e).form.tag=i)},{default:l(()=>[(C(!0),F(pe,null,ge(n(e).tagData,i=>(C(),R(v,{value:i.id},{default:l(()=>[f(_e(i.title),1)]),_:2},1032,["value"]))),256))]),_:1},8,["value"])]),_:1})]),_:1}),a(_,{span:"24"},{default:l(()=>[a(g,{label:"Cover Img"},{default:l(()=>[a(te,{name:"file",accept:"image/*",multiple:!1,"before-upload":b,"file-list":n(p),"onUpdate:file-list":t[3]||(t[3]=i=>ve(p)?p.value=i:null)},{default:l(()=>[y("p",Ne,[n(e).form.coverUrl?(C(),F("img",{key:0,src:n(e).form.coverUrl,style:{width:"60px",height:"80px"}},null,8,$e)):(C(),R(n(Oe),{key:1}))]),qe]),_:1},8,["file-list"])]),_:1})]),_:1}),a(_,{span:"24"},{default:l(()=>[a(g,{label:"Description"},{default:l(()=>[a(ae,{placeholder:"Please enter",value:n(e).form.description,"onUpdate:value":t[4]||(t[4]=i=>n(e).form.description=i)},null,8,["value"])]),_:1})]),_:1}),a(_,{span:"13"},{default:l(()=>[a(g,{label:"Price",name:"price"},{default:l(()=>[a(oe,{placeholder:"Please enter",min:0,value:n(e).form.price,"onUpdate:value":t[5]||(t[5]=i=>n(e).form.price=i),style:{width:"100%"}},null,8,["value"])]),_:1})]),_:1}),a(_,{span:"12"},{default:l(()=>[a(g,{label:"day",name:"day"},{default:l(()=>[a(k,{placeholder:"Please select",value:n(e).form.day,"onUpdate:value":t[6]||(t[6]=i=>n(e).form.day=i),style:{width:"100%"}},{default:l(()=>[a(v,{value:"Tue"},{default:l(()=>[f("Tuesday")]),_:1}),a(v,{value:"Wed"},{default:l(()=>[f("Wednesday")]),_:1}),a(v,{value:"Thu"},{default:l(()=>[f("Thursday")]),_:1}),a(v,{value:"Fri"},{default:l(()=>[f("Friday")]),_:1}),a(v,{value:"Sat"},{default:l(()=>[f("Saturday")]),_:1}),a(v,{value:"Sun"},{default:l(()=>[f("Sunday")]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),a(_,{span:"12"},{default:l(()=>[a(g,{label:"Time period",name:"time"},{default:l(()=>[a(k,{placeholder:"Please select",allowClear:"",options:n(e).timeData,"field-names":{label:"time",value:"id"},value:n(e).form.time,"onUpdate:value":t[7]||(t[7]=i=>n(e).form.time=i)},null,8,["options","value"])]),_:1})]),_:1}),a(_,{span:"12"},{default:l(()=>[a(g,{label:"Status",name:"status"},{default:l(()=>[a(k,{placeholder:"Please select",allowClear:"",value:n(e).form.status,"onUpdate:value":t[8]||(t[8]=i=>n(e).form.status=i)},{default:l(()=>[a(v,{key:"0",value:"0"},{default:l(()=>[f("Available")]),_:1}),a(v,{key:"1",value:"1"},{default:l(()=>[f("Unavailable")]),_:1})]),_:1},8,["value"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])])]),_:1},8,["visible","title"])])])}}});const We=ke(Be,[["__scopeId","data-v-16425872"]]);export{We as default};
