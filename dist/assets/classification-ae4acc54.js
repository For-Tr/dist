import{l as j,d as y,u as q,c as Y}from"./classification-3730ec49.js";import{d as G,b as g,A as w,l as H,r as s,o as k,e as C,f as r,n,y as i,C as x,z as J,g as l,m as d,p as Q,h as W}from"./index-da835352.js";import{_ as X}from"./_plugin-vue_export-helper-c27b6911.js";const Z=m=>(Q("data-v-e9d135a0"),m=m(),W(),m),ee={class:"page-view"},te={class:"table-operations"},oe={key:0},ae=["onClick"],le=Z(()=>r("a",{href:"#",style:{color:"red"}},"Delete",-1)),ne=G({__name:"classification",setup(m){const b=g([{title:"Class type",dataIndex:"title",key:"title"},{title:"Operation",dataIndex:"action",key:"operation",align:"center",fixed:"right",width:140}]),a=g({userList:[],loading:!1,currentAdminUserName:"",keyword:"",selectedRowKeys:[],pageSize:10,page:1}),o=g({visile:!1,editFlag:!1,title:"",form:{key:void 0,title:void 0},rules:{title:[{required:!0,message:"Please enter",trigger:"change"}]}}),f=w();H(()=>{_()});const _=()=>{a.loading=!0,j({keyword:a.keyword}).then(e=>{a.loading=!1,console.log(e),e.data.forEach((t,p)=>{t.index=p+1}),a.userList=e.data}).catch(e=>{a.loading=!1,console.log(e)})},S=w({onChange:(e,t)=>{console.log(`selectedRowKeys: ${e}`,"selectedRows: ",t),a.selectedRowKeys=e}}),F=()=>{h(),o.visile=!0,o.editFlag=!1,o.title="New";for(const e in o.form)o.form[e]=void 0},A=e=>{h(),o.visile=!0,o.editFlag=!0,o.title="Edit";for(const t in o.form)o.form[t]=void 0;for(const t in e)o.form[t]=e[t]},D=e=>{console.log("delete",e),y({ids:e.id}).then(t=>{_()}).catch(t=>{d.error(t.msg||"Delete Failed")})},K=()=>{if(console.log(a.selectedRowKeys),a.selectedRowKeys.length<=0){console.log("hello"),d.warn("Select items to delete");return}y({ids:a.selectedRowKeys.join(",")}).then(e=>{d.success("Delete Successful!"),a.selectedRowKeys=[],_()}).catch(e=>{d.error(e.msg||"Delete Failed")})},R=()=>{var e;(e=f.value)==null||e.validate().then(()=>{o.editFlag?q({id:o.form.id},o.form).then(t=>{u(),_()}).catch(t=>{console.log(t),d.error(t.msg||"Operation Failed")}):Y(o.form).then(t=>{u(),_()}).catch(t=>{console.log(t),d.error(t.msg||"Operation Failed")})}).catch(t=>{console.log("Cannot be blank")})},z=()=>{u()},h=()=>{var e;(e=f.value)==null||e.resetFields()},u=()=>{o.visile=!1};return(e,t)=>{const p=s("a-button"),N=s("a-space"),I=s("a-divider"),O=s("a-popconfirm"),E=s("a-table"),B=s("a-input"),L=s("a-form-item"),M=s("a-col"),V=s("a-row"),$=s("a-form"),T=s("a-modal");return k(),C("div",null,[r("div",ee,[r("div",te,[n(N,null,{default:i(()=>[n(p,{type:"primary",onClick:F},{default:i(()=>[x("Add")]),_:1}),n(p,{danger:"",onClick:K},{default:i(()=>[x("Mass Delete")]),_:1})]),_:1})]),n(E,{size:"middle",rowKey:"id",loading:l(a).loading,columns:l(b),"data-source":l(a).userList,scroll:{x:"max-content"},"row-selection":l(S),pagination:{size:"default",current:l(a).page,pageSize:l(a).pageSize,onChange:c=>l(a).page=c,showSizeChanger:!1,showTotal:c=>`Total of ${c} data`}},{bodyCell:i(({text:c,record:v,index:se,column:P})=>[P.key==="operation"?(k(),C("span",oe,[r("a",{onClick:U=>A(v)},"Edit",8,ae),n(I,{type:"vertical"}),n(O,{title:"Sure to delete?","ok-text":"Yes","cancel-text":"No",onConfirm:U=>D(v)},{default:i(()=>[le]),_:2},1032,["onConfirm"])])):J("",!0)]),_:1},8,["loading","columns","data-source","row-selection","pagination"])]),r("div",null,[n(T,{visible:l(o).visile,forceRender:!0,title:l(o).title,"ok-text":"OK","cancel-text":"Cancel",onCancel:z,onOk:R},{default:i(()=>[r("div",null,[n($,{ref_key:"myform",ref:f,"label-col":{style:{width:"80px"}},model:l(o).form,rules:l(o).rules},{default:i(()=>[n(V,{gutter:24},{default:i(()=>[n(M,{span:"24"},{default:i(()=>[n(L,{label:"Class type",name:"title"},{default:i(()=>[n(B,{placeholder:"Please enter",value:l(o).form.title,"onUpdate:value":t[0]||(t[0]=c=>l(o).form.title=c)},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])])]),_:1},8,["visible","title"])])])}}});const re=X(ne,[["__scopeId","data-v-e9d135a0"]]);export{re as default};
