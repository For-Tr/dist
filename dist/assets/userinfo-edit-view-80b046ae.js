import{u as y,a as k,A as E,b as I,l as U,G as F,B as S,r as v,o as p,e as _,n as h,y as b,g as o,f as e,w as c,v as m,p as V,h as A,K as B,m as D}from"./index-da835352.js";import{A as N}from"./avatar-4ee3f7af.js";import{_ as C}from"./_plugin-vue_export-helper-c27b6911.js";const i=r=>(V("data-v-12688b5c"),r=r(),A(),r),G={class:"content-list"},P=i(()=>e("div",{class:"list-title"},"Options",-1)),M={class:"list-content"},T={class:"edit-view"},L={class:"item flex-view"},R=i(()=>e("div",{class:"label"},"Avatar",-1)),z={class:"right-box avatar-box flex-view"},J=["src"],K=["src"],O={class:"change-tips flex-view"},X=i(()=>e("label",null,"Click to change ",-1)),$=i(()=>e("p",{class:"tip"},"The image format supports GIF, PNG, JPEG, and the size is not less than 200 PX and less than 4 MB",-1)),j={class:"item flex-view"},q=i(()=>e("div",{class:"label"},"Name",-1)),H={class:"right-box"},Q={class:"item flex-view"},W=i(()=>e("div",{class:"label"},"Phone number",-1)),Y={class:"right-box"},Z={class:"item flex-view"},ee=i(()=>e("div",{class:"label"},"E-mail",-1)),te={class:"right-box"},se={class:"item flex-view"},oe=i(()=>e("div",{class:"label"},"Biography",-1)),ae={class:"right-box"},ie=i(()=>e("p",{class:"tip"},"Limited to 200 words",-1)),ne={__name:"userinfo-edit-view",setup(r){y();const f=k();let d=E(!1),t=I({form:{avatar:void 0,avatarFile:void 0,nickname:void 0,email:void 0,mobile:void 0,description:void 0}});U(()=>{u()});const g=a=>{const s=new Date().getTime().toString()+"."+a.type.substring(6),l=new File([a],s);return console.log(l),t.form.avatarFile=l,!1},u=()=>{d.value=!0;let a=f.user_id;F({id:a}).then(s=>{t.form=s.data,t.form.avatar&&(t.form.avatar=S+t.form.avatar),d.value=!1}).catch(s=>{console.log(s),d.value=!1})},x=()=>{let a=new FormData,s=f.user_id;t.form.avatarFile&&a.append("avatar",t.form.avatarFile),t.form.nickname&&a.append("nickname",t.form.nickname),t.form.email&&a.append("email",t.form.email),t.form.mobile&&a.append("mobile",t.form.mobile),t.form.description&&a.append("description",t.form.description),B({id:s},a).then(l=>{D.success("保存成功"),u()}).catch(l=>{console.log(l)})};return(a,s)=>{const l=v("a-upload"),w=v("a-spin");return p(),_("div",G,[P,h(w,{spinning:o(d),style:{"min-height":"200px"}},{default:b(()=>[e("div",M,[e("div",T,[e("div",L,[R,e("div",z,[o(t).form&&o(t).form.avatar?(p(),_("img",{key:0,src:o(t).form.avatar,class:"avatar"},null,8,J)):(p(),_("img",{key:1,src:o(N),class:"avatar"},null,8,K)),e("div",O,[h(l,{name:"file",accept:"image/*",multiple:!1,"before-upload":g},{default:b(()=>[X]),_:1}),$])])]),e("div",j,[q,e("div",H,[c(e("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=n=>o(t).form.nickname=n),placeholder:"Enter your name",maxlength:"20",class:"input-dom"},null,512),[[m,o(t).form.nickname]])])]),e("div",Q,[W,e("div",Y,[c(e("input",{type:"text","onUpdate:modelValue":s[1]||(s[1]=n=>o(t).form.mobile=n),placeholder:"Enter your phone number",maxlength:"100",class:"input-dom web-input"},null,512),[[m,o(t).form.mobile]])])]),e("div",Z,[ee,e("div",te,[c(e("input",{type:"text","onUpdate:modelValue":s[2]||(s[2]=n=>o(t).form.email=n),placeholder:"Enter your Email",maxlength:"100",class:"input-dom web-input"},null,512),[[m,o(t).form.email]])])]),e("div",se,[oe,e("div",ae,[c(e("textarea",{"onUpdate:modelValue":s[3]||(s[3]=n=>o(t).form.description=n),placeholder:"Enter biography",maxlength:"200",class:"intro"},`\r
          `,512),[[m,o(t).form.description]]),ie])]),e("button",{class:"save mg",onClick:s[4]||(s[4]=n=>x())},"Save")])])]),_:1},8,["spinning"])])}}},ce=C(ne,[["__scopeId","data-v-12688b5c"]]);export{ce as default};
