import{H as q}from"./header-ca487dae.js";import{F as z}from"./footer-597ca35d.js";import{A as D}from"./add-e671ed51.js";import{S as H}from"./share-icon-d676e472.js";import{d as W,l as j,a as M,b as P}from"./thing-a049f12c.js";import{j as G,u as J,k as K,a as Q,A as n,l as X,B as b,m,o as d,e as r,n as y,f as s,g as o,C as Y,z as w,t as i,F as Z,q as ss,x as ts,s as S,D as es,p as os,h as as}from"./index-da835352.js";import{u as C}from"./order-09e817fb.js";import{_ as ns}from"./_plugin-vue_export-helper-c27b6911.js";import"./k-logo-b1d5237f.js";import"./avatar-4ee3f7af.js";const cs="/assets/want-read-hover-e9e227e2.svg",is="/assets/recommend-hover-69a5cc0c.svg",ls=async u=>G({url:"/CSAA/index/comment/list",params:u,data:{},headers:{}});const _=u=>(os("data-v-a1aa32dc"),u=u(),as(),u),ds={class:"detail"},rs={class:"detail-content"},_s={class:"detail-content-top"},us={style:{position:"relative"}},hs={class:"thing-infos-view"},vs={class:"thing-infos"},ms={class:"thing-img-box"},ps=["src"],gs={class:"thing-info-box"},fs={class:"thing-state"},xs=_(()=>s("span",{class:"state hidden-sm"},"Class Status",-1)),bs={key:0},ys={key:1,style:{color:"rebeccapurple"}},ws={key:2,style:{color:"red"},class:"state hidden-sm"},Ss={class:"thing-name"},Cs=_(()=>s("span",{class:"a-price-symbol"},"¥",-1)),Is={class:"a-price"},ks={class:"translators flex-view",style:{}},As=_(()=>s("span",null,"Category：  ",-1)),Ts={class:"name"},Ls={class:"translators flex-view",style:{}},Ns=_(()=>s("span",null,"Time：",-1)),Us={class:"name"},Bs=["src"],Es=_(()=>s("span",null,"Order Now",-1)),Rs={class:"thing-counts hidden-sm"},Vs={class:"count-img"},$s=["src"],Fs={class:"count-box flex-view"},Os=_(()=>s("div",{class:"count-text-box"},[s("span",{class:"count-title"},"Like(St2/3)")],-1)),qs={class:"count-num-box"},zs={class:"num-text"},Ds={class:"count-img"},Hs=["src"],Ws={class:"count-box flex-view"},js=_(()=>s("div",{class:"count-text-box"},[s("span",{class:"count-title"},"Collected(St2/3)")],-1)),Ms={class:"count-num-box"},Ps={class:"num-text"},Gs={class:"count-img"},Js=["src"],Ks=es('<div class="count-box flex-view" data-v-a1aa32dc><div class="count-text-box" data-v-a1aa32dc><span class="count-title" data-v-a1aa32dc>Share(St2/3)</span></div><div class="count-num-box" data-v-a1aa32dc><span class="num-text" data-v-a1aa32dc></span></div></div>',1),Qs={class:"detail-content-bottom"},Xs={class:"thing-content-view flex-view"},Ys={class:"main-content"},Zs={class:"order-view main-tab"},st=["onClick"],tt={class:"text",style:{}},et={__name:"detail",setup(u){const I=J(),k=K(),p=Q();let l=n(""),a=n({}),x=n(6),A=n(["Description","Comments"]),g=n(0),T=n([]),L=n([]);n(0);let N=n("recent");n(),n([]);let h=!1;X(()=>{l.value=k.query.id.trim(),f(),F(),O(),U()});const U=()=>{let t=p.user_id;C({userId:t,orderStatus:2}).then(e=>{e.data.forEach((c,v)=>{c.thing==l.value?h=!0:h=!1})}).catch(e=>{console.log(e)}),C({userId:t,orderStatus:0}).then(e=>{e.data.forEach((c,v)=>{c.thing==l.value?h=!0:h=!1})}).catch(e=>{console.log(e)})},B=t=>{g.value=t,x.value=6+54*t},f=()=>{W({id:l.value}).then(t=>{a.value=t.data,a.value.cover=b+a.value.cover}).catch(t=>{m.error("获取详情失败")})},E=()=>{let t=p.user_name;t?M({thingId:l.value,username:t}).then(e=>{m.success(e.msg),f()}).catch(e=>{console.log("操作失败")}):m.warn("请先登录")},R=()=>{let t=p.user_name;t?P({thingId:l.value,username:t}).then(e=>{m.success(e.msg),f()}).catch(e=>{console.log("收藏失败")}):m.warn("请先登录")},V=()=>{let e="http://service.weibo.com/share/share.php?title="+("分享一个非常好的酒店 "+window.location.href);window.open(e)},$=t=>{console.log(t),p.user_id,I.push({name:"confirm",query:{id:t.id,title:t.title,cover:t.cover,price:t.price,day:t.day}})},F=()=>{j({sort:"recommend"}).then(t=>{t.data.forEach((e,c)=>{e.cover&&(e.cover=b+e.cover)}),console.log(t),L.value=t.data.slice(0,6)}).catch(t=>{console.log(t)})},O=()=>{ls({thingId:l.value,order:N.value}).then(t=>{T.value=t.data}).catch(t=>{console.log(t)})};return(t,e)=>(d(),r("div",ds,[y(q),s("div",rs,[s("div",_s,[s("div",us,[s("div",hs,[s("div",vs,[s("div",ms,[s("img",{src:o(a).cover},null,8,ps)]),s("div",gs,[s("div",fs,[xs,o(a).status==0?(d(),r("span",bs,"Avaliable")):(d(),r("span",ys,"Unavailable")),Y("     "),o(h)==!0?(d(),r("span",ws,"Already Participated")):w("",!0)]),s("h1",Ss,i(o(a).title),1),s("span",null,[Cs,s("span",Is,i(o(a).price),1)]),s("div",ks,[As,s("span",Ts,i(o(a).classification_title),1)]),s("div",Ls,[Ns,s("span",Us,i(o(a).time_title)+", "+i(o(a).day),1)]),o(a).status==0?(d(),r("button",{key:0,class:"buy-btn",onClick:e[0]||(e[0]=c=>$(o(a)))},[s("img",{src:o(D)},null,8,Bs),Es])):w("",!0)])]),s("div",Rs,[s("div",{class:"count-item flex-view pointer",onClick:e[1]||(e[1]=c=>E())},[s("div",Vs,[s("img",{src:o(cs)},null,8,$s)]),s("div",Fs,[Os,s("div",qs,[s("span",zs,i(o(a).wish_count),1)])])]),s("div",{class:"count-item flex-view pointer",onClick:e[2]||(e[2]=c=>R())},[s("div",Ds,[s("img",{src:o(is)},null,8,Hs)]),s("div",Ws,[js,s("div",Ms,[s("span",Ps,i(o(a).collect_count),1)])])]),s("div",{class:"count-item flex-view",onClick:e[3]||(e[3]=c=>V())},[s("div",Gs,[s("img",{src:o(H)},null,8,Js)]),Ks])])])])]),s("div",Qs,[s("div",Xs,[s("div",Ys,[s("div",Zs,[(d(!0),r(Z,null,ss(o(A),(c,v)=>(d(),r("span",{class:S(["tab",o(g)===v?"tab-select":""]),key:v,onClick:ot=>B(v)},i(c),11,st))),128)),s("span",{style:ts({left:o(x)+"px"}),class:"tab-underline"},null,4)]),s("div",{class:S(["thing-intro",o(g)<=0?"":"hide"])},[s("p",tt,i(o(a).description),1)],2)])])])]),y(z)]))}},vt=ns(et,[["__scopeId","data-v-a1aa32dc"]]);export{vt as default};
