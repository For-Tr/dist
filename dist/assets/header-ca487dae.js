import{j as q,d as D,b as E,l as b,G as U,B as F,u as G,k as H,a as K,A as f,r as p,o as r,e as u,f as e,g as n,C as j,H as z,c as O,y as a,n as c,t as h,I as P,F as T,q as J,p as Q,h as W}from"./index-da835352.js";import{l as X}from"./k-logo-b1d5237f.js";import{A as Y}from"./avatar-4ee3f7af.js";import{_ as Z}from"./_plugin-vue_export-helper-c27b6911.js";const ee=async d=>q({url:"/CSAA/index/notice/list_api",params:d,data:{},headers:{}}),se="/assets/search-icon-2c208f60.svg",te="/assets/message-icon-b7a386ca.svg",g=d=>(Q("data-v-76e94641"),d=d(),W(),d),oe={class:"main-bar-view"},ne={class:"logo"},ae=["src"],le=g(()=>e("a",{href:"/index",style:{"font-size":"x-large","font-weight":"bolder",color:"#0a6aae"}},"CSAA Guest",-1)),ie={class:"search-entry"},re=["src"],ce=["onKeyup"],de={class:"right-view"},ue={class:"user-info"},_e=["src"],me=["src"],pe={class:"username"},ve=["src"],fe=g(()=>e("span",{class:"msg-point",style:{}},null,-1)),he={class:"list-content"},ge={class:"notification-view"},ye={class:"list"},ke={class:"notification-item flex-view"},we={class:"content-box"},Ce={class:"header"},be={class:"title-txt"},xe=g(()=>e("br",null,null,-1)),Ie={class:"time"},Ae=g(()=>e("div",{class:"head-text"},null,-1)),Se={class:"content"},$e=D({__name:"header",setup(d){let l=E({form:{avatar:""}});b(()=>{x()});const x=()=>{i.value=!0;let t=y.user_id;U({id:t}).then(s=>{console.log("API response",s.data),l.form=s.data,l.form.avatar&&(l.form.avatar=F+l.form.avatar),i.value=!1}).catch(s=>{console.log(s),i.value=!1})},_=G(),I=H(),y=K(),w=f();let i=f(!1),m=f(!1),C=f([]);b(()=>{A()});const A=()=>{i.value=!0,ee({}).then(t=>{C.value=t.data,i.value=!1}).catch(t=>{console.log(t),i.value=!1})},S=()=>{const t=w.value.value;if(I.name==="search")_.push({name:"search",query:{keyword:t}});else{let s=_.resolve({name:"search",query:{keyword:t}});window.open(s.href,"_blank")}},$=()=>{_.push({name:"login"})},k=t=>{_.push({name:t})},V=()=>{y.logout().then(t=>{_.push({name:"portal"})})},B=()=>{m.value=!1};return(t,s)=>{const v=p("a-menu-item"),L=p("a-menu"),M=p("a-dropdown"),R=p("a-spin"),N=p("a-drawer");return r(),u("div",oe,[e("div",ne,[e("img",{src:n(X),class:"search-icon",onClick:s[0]||(s[0]=o=>t.$router.push({name:"portal"}))},null,8,ae),j("   "),le]),e("div",ie,[e("img",{src:n(se),class:"search-icon"},null,8,re),e("input",{placeholder:"Search...",ref_key:"keywordRef",ref:w,onKeyup:z(S,["enter"])},null,40,ce)]),e("div",de,[n(y).user_token?(r(),O(M,{key:0},{overlay:a(()=>[c(L,null,{default:a(()=>[c(v,null,{default:a(()=>[e("a",{onClick:s[2]||(s[2]=o=>k("orderView"))},"My Order")]),_:1}),c(v,null,{default:a(()=>[e("a",{onClick:s[3]||(s[3]=o=>k("childView"))},"My Child")]),_:1}),c(v,null,{default:a(()=>[e("a",{onClick:s[4]||(s[4]=o=>k("userInfoEditView"))},"Infonmation")]),_:1}),c(v,null,{default:a(()=>[e("a",{onClick:s[5]||(s[5]=o=>V())},"Log out")]),_:1})]),_:1})]),default:a(()=>[e("a",{class:"ant-dropdown-link",onClick:s[1]||(s[1]=o=>o.preventDefault())},[e("div",ue,[n(l).form.avatar?(r(),u("img",{key:0,src:n(l).form.avatar,class:"self-img"},null,8,_e)):(r(),u("img",{key:1,src:n(Y),class:"self-img"},null,8,me)),e("span",pe,h(n(l).form.username||"Get NAME Failed"),1)])])]),_:1})):(r(),u("button",{key:1,class:"login btn hidden-sm",onClick:s[6]||(s[6]=o=>$())},"Log in")),e("div",{class:"right-icon",onClick:s[7]||(s[7]=o=>P(m)?m.value=!0:m=!0)},[e("img",{src:n(te)},null,8,ve),fe]),e("div",null,[c(N,{title:"Notice",placement:"right",closable:!0,maskClosable:!0,visible:n(m),onClose:B},{default:a(()=>[c(R,{spinning:n(i),style:{"min-height":"200px"}},{default:a(()=>[e("div",he,[e("div",ge,[e("div",ye,[(r(!0),u(T,null,J(n(C),o=>(r(),u("div",ke,[e("div",we,[e("div",Ce,[e("span",be,h(o.title),1),xe,e("span",Ie,h(o.create_time),1)]),Ae,e("div",Se,[e("p",null,h(o.content),1)])])]))),256))])])])]),_:1},8,["spinning"])]),_:1},8,["visible"])])])])}}});const Re=Z($e,[["__scopeId","data-v-76e94641"]]);export{Re as H};
